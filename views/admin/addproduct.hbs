{{> adminheader}}

<!DOCTYPE html>
<html>

<head>
  <title>Add Product</title>
  <link rel="stylesheet" type="text/css" href="/css/addproduct.css">
</head>

<body>

  <div class="form-container">
    <h1>Add Product</h1>
    <form id="uploadForm" action="" method="post" enctype="multipart/form-data">


      <div class="form-field">
        <label for="name">Name:</label>
        <input type="text" id="name" maxlength="40" name="name">
      </div>

      <div class="form-field">
        <label for="name">Description:</label>
        <input type="text" id="name" maxlength="40" name="description">
      </div>

       
      <div class="form-field">
        <label for="image">Image:</label>
        <input type="file" id="image" name="image" accept="image/*" onchange="previewImage(event)" multiple>
        <div class="image-preview"></div>
      </div> 

          {{!-- <div class="form-field">
        <label for="image">Image:</label>
        <input type="file" id="images" name="images[]" accept="image/*" onchange="previewImages(event)" multiple>
        <div class="image-preview-container"></div>
      </div> --}}
      




      <div class="form-field">
        <label for="name">Category:</label>
    
 
        <select id="name" name="category" input type="text">
          {{#each categoryData}}
          <option value={{this._id}}>{{this.name}}</option>
       
          {{/each}}
        </select>
           
    
      
      </div>




      <div class="form-field">
        <label for="name">Price:</label>
        <input type="number" id="name" name="price">
      </div>


      <div class="form-field">
        <label for="name">Brand:</label>
        <input type="text" id="name" maxlength="40" name="brand">
      </div>



      <div class="form-field">
        <label for="name">Quantity:</label>
        <input type="number" id="name" name="quantity">
      </div>


      <div>
        <p style="color: green;">
          {{message}}
        </p>
         <p style="color: rgb(212, 7, 7);">
          {{message1}}
        </p>
      </div>

      <button id="submit" class="submit-button" type="submit">Submit</button>
        <a href="/admin/product" class="btn btn-edit">Go Back</a> 
    </form>
  </div>





  <script>




    function previewImage(event) {
      const preview = document.querySelector('.image-preview');
      preview.innerHTML = '';
      const file = event.target.files[0];  //s
      const reader = new FileReader();
      reader.onload = function (event) {
        
        
        const img = new Image();
        img.src = event.target.result;
        img.style.width = '100%';
        img.style.height = '100%';
        preview.appendChild(img);
      };
      reader.readAsDataURL(file);  
    }

  </script>






{{!-- frontend validate image --}}
<script>


const uploadForm = document.getElementById('uploadForm');
const submitButton = document.getElementById('submit');
const imageInput = document.getElementById('image');

submitButton.addEventListener('click', function(event) {
  if (!validateImage()) {
    event.preventDefault();
  }
});

function validateImage() {
  const allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
  if (!allowedExtensions.exec(imageInput.value)) {
    alert('Invalid file type.');
    imageInput.value = '';
    return false;
  }
  return true;
}
</script>





  
</body>

</html>
